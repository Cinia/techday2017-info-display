version: '3'
services:
  front:
    build: front/.
    ports:
      - "8080:80"
  # Proxy container which handles passing request to the actual services
  #    the container to which request is passed is chosen with the first part of request url
  #    for example: "http://localhost:8080/first/page" is proxied to "http://first:80/page"
  proxy:
    # image to start, image must be available in docker hub or built locally
    image: reap/proxy-for-docker-containers
    ports:
     - "9090:8080"
  # first:
  #   # image to build
  #   build: backend/test-upstream-container/.
  #   environment:
  #    - CONTAINER_ID=Kontti-1
  # second:
  #   build: backend/test-upstream-container/.
  #   environment:
  #    - CONTAINER_ID=Kontti-2
  # gotest:
  #   build: backend/golang-example/.
  abc:
    build: backend/abc/.
    ports:
      - "8500:80"
  antell:
    build: backend/antell/.
  boardgames:
    build: backend/boardgame-club-connector
  now-listening:
    build: backend/now-listening/.
